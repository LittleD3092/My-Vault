標籤: #computer-networks 

---

[TOC]

---

- Known as ==HyperText Transfer Protocol (HTTP)==.
- A ==web page== consists of objects.
- An ==object== is simply a file.
- Most web pages consist of a ==base HTML file== and several referenced objects.
- ==Web browsers== implement the client side of HTTP, ==web servers== implement the server side.
- Because HTTP server maintains no information about the clients, HTTP is said to be a ==stateless protocol==.

# Non-Persistent and Persistent Connections

## Non-Persistent Connections

1. Initiates TCP connection.
2. Client sends request to server.
3. Server respondes with `home.index` file.
4. Server tells TCP to close the TCP connection.
5. The client receives the response message. TCP connection closed. Client found that  there are 10 references in `home.index` file.
6. For each reference, do step 1~5.

![[Pasted image 20221029052044.png|500]]

The time ==RTT (round-trip time)== is illustrated in the figure above. For the steps above, we need total of 22 RTTs to get the webpage.

## Persistent Connections

We can see that [[#Non-Persistent Connections]] have a problem that a brand-new connection must be established and maintained for *each requested object*.

With HTTP/1.1 persistent connections, the server leaves the TCP connection open after sending a response. Subsequent requests and responses between the same client and server can be sent over the same connection. 

In this way, the problem is solved. The total time is reduced to 12 RTTs.

# Message Format

## Request Message

```
GET /somedir/page.html HTTP/1.1
Host: www.someschool.edu
Connection: close
User-agent: Mozilla/5.0
Accept-language: fr
```

- The first line is called the ==request line==.
	- There are three fields: method field, URL field, and HTTP version field.
	- The method field can have the following value:
		- `GET`: The browser requests an object.
		- `POST`: Used when filling a form.
		- `HEAD`: Server will respond without the object requested.
		- `PUT`: Upload an object to a specific path on a specific web server.
		- `DELETE`: Delete an object on a web server.
- The subsequent lines are called the ==header lines==.
	- `Host` specifies the host on which the object resides.
		- This line is required by proxy servers.
	- `Connection`: Tells server whether to close TCP connection after response.
	- `User-agent`: The browser type.
	- `Accept-language`: Specify the language that the user prefers to receive. `fr` means French.

A general format of the request message:

![[Pasted image 20221029053911.png|500]]

> The "Entity body" is used for `POST` method.

## Response Message

```
HTTP/1.1 200 OK
Connection: close
Date: Tue, 18 Aug 2015 15:44:04 GMT
Server: Apache/2.2.3 (CentOS)
Last-Modified: Tue, 18 Aug 2015 15:11:03 GMT
Content-Length: 6821
Content-Type: text/html

(data data data ...)
```

- It has 3 sections:
	- An initial ==status line==.
		- Has 3 fields:
			- The protocol version field.
			- A status code.
				- `200 OK`: Succeeded.
				- `301 Moved Permanently`: Request object has been permanently moved. The new URL is specified in header `Location`.
				- `400 Bad Request`: Generic error code that the request could not be understood by the server.
				- `404 Not Found`: The requested document does not exist on this server.
				- `505 HTTP Version Not Supported`: The requested HTTP protocol version is not supported by the server.
			- A corresponding status message.
	- Six ==header lines==.
		- `Connection`: Whether to close TCP connection after response.
		- `Date`: Indicates time and date.
		- `Server`: The message was generated by an Apache Web server.
		- `Last-Modified`: Time and date when the object was last modified.
		- `Content-Length`: Number of bytes in the object being sent.
		- `Content-Type`: The object in the body is a HTML file.
	- The ==entity body==.

# Cookies

Because HTTP server maintains no information about the clients, HTTP is said to be a stateless protocol. However, it is often desirable for a web site to identify users.

Cookies allow sites to keep track of users, and major commecial web sites use cookies today.

Cookie technology has four components:

1. A cookie header line in the HTTP response message.
2. A cookie header line in the HTTP request message.
3. A cookie file kept on the user's end system and managed by the user's browser.
4. A back-end database at the web site.

The sequence graph is as shown:

![[Pasted image 20221029153924.png]]

In this way, the server host is able to track client's activity. Although server does not know the name of the client, it knows that `ID 1678` comes and visit its site.

# Web Caching

[[Proxy]]

# HTTP/2

The HTTP/1.1 we discussed has a ==head of line (HOL) blocking== problem because of [[#Persistent Connections]]. The link is occupied by client, and other hosts cannot use it.

---

參考資料:

Computer Networking, A Top-Down Approach, 8th edition

---

link:


---

This note is included in github repository [My-Vault](https://github.com/LittleD3092/My-Vault.git). Clone this repository and open it in [obsidian](https://obsidian.md/) to enable utilities like wikilinks and graph view.