標籤: #linux 

這是一種[[linux 文字編輯器]]，並且在許多[[Unix like]] 的系統上都有預裝
他有一個較新的版本，叫做[[vim]]，加入了字顯示不同顏色的功能

---

# 使用

vi有三種模式，分別為一般模式、編輯模式、指令列命令模式

1. **一般模式**
在剛進入vi時就是一般模式，可以用方向鍵瀏覽文件，也可以刪除、複製和貼上，但是不能編輯。

2. **編輯模式**
在一般模式下按下`i, I, o, O, a, A, r, R`可以進入，畫面左下方會出現INSERT或REPLACE字樣，就可以編輯檔案內容，按下esc可以退出

3. **指令列命令模式**
在一般模式按下`: 或 / 或 ?`進入，讀取、儲存、退出等都在這裡

---


# 簡易範例
1. 新建名為test.txt的新檔案
`$ vi test.txt`
![[Pasted image 20210723150051.png]]
上圖中，若檔案存在，`[New File]`會顯示檔案位置、行數、字元數

2. 按下i進行編輯，此時除了esc以外的鍵都是輸入鍵
![[Pasted image 20210723150440.png]]

3. 按下esc進入一般模式，輸入`:wq`存檔離開
> `:wq!`若目前沒有編輯權限加上驚嘆號可以強制寫入，但是是在權限可變更的情況下

---

# 按鍵

## 一般模式: 移動游標的方法

按鍵        | 功能
------------|-----------------
方向鍵       | 移動游標一個字元
`0`        | 移到這一行最前面
`$`        | 移到這一行最後面
`G`        | 移到最後一行
`gg`       | 移到第一行
`n + enter` | 向下移動 n 行

## 一般模式: 搜尋與取代

按鍵 | 功能
---|---
`/ + 一個字串` | 搜尋字串(往下)
`? + 一個字串` | 搜尋字串(往上)
`:行數1,行數2/字串1/字串2/g` | 在行數1和行數2之間，尋找字串1並替換成字串2
`:1,$s/字串1/字串2/g` | 搜尋整份文件，將字串1替換成字串2
`:1,$s/字串1/字串2/gc` | 搜尋整份文件，將字串1替換成字串2，並且替換前檢查是否替換

## 一般模式: 刪除複製與貼上

按鍵 | 功能
---|---
`x, X` | `x`為向後刪除一個字元(del)`X`為向前刪除一個字元(backspace)
`dd` | 刪除一列
`ndd` | 刪除往下的n列
`yy` | 複製一行
`nyy` | 往下複製n行
`p, P` | `p`為將剪貼簿插入下一行，`P`為插入上一行
`u` | 復原
`Ctrl + r` | 反復原
`.` | 重複前一個動作

## 進入編輯模式
按鍵 | 功能
---|---
`i, I` | `i`在游標處插入、`I`在此行前端插入
`a, A` | `a`在游標下一個字元處插入、`A`在此行最後端插入
`o, O` | `o`往下新增一行插入、`O`往上新增一行插入
`r, R` | `r`取代游標所在的字元
`Esc` | 退出編輯模式

## 指令列命令模式

按鍵 | 功能
---|---
`:w` | 寫入
`:q` | 離開vi
`:wq` | 儲存後離開